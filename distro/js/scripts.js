class CInterestClass{constructor(e){this.mode="",this.fields={date:{clicklistener:"#smc-date",fields:[".smc-date-control",".smc-date-result"]},fixed:{clicklistener:"#smc-fixed",fields:[".smc-fixed-control",".smc-fixed-result"]}},this.changeMode(e)}changeMode(e){"fixed"===e||"date"===e?this.mode=e:console.error("Interest system mode must be either 'fixed' or 'date'")}setMode(e){"fixed"===e||"date"===e?"fixed"===e?(document.querySelector(this.fields.fixed.clickListener).classList.add("smc-active"),document.querySelector(this.fields.date.clickListener).classList.remove("smc-active"),this.fields.fixed.forEach(e=>{document.querySelectorAll(e).forEach(e=>{console.log(e)})})):"date"===e||console.error("Interest System - Invalid Mode"):console.error("Interest system mode must be either 'fixed' or 'date'")}}!function(){new CInterestClass("fixed");console.log("Interest Manager Initiated")}(),function(){var b=document.getElementById("initial_deposit"),g=document.querySelector("#contribution_amount");document.querySelector("#investment_goal");function n(e,t){var n=parseFloat(e.getAttribute("min")),a=parseFloat(e.getAttribute("max")),r=parseFloat(e.getAttribute("step"))||1,s=e.dataset.value||e.defaultValue||0,o=parseFloat(e.value.replace(/\$/,"")),o=isNaN(parseFloat(o))?s:("add"==t?o+=r:"sub"==t&&(o-=r),o<n?n:a<o?a:o);e.dataset.value=o,e.value=(e.dataset.prepend||"")+o+(e.dataset.append||""),i()}function q(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function t(){for(var e=parseFloat(b.dataset.value),t=parseFloat(estimated_return.dataset.value/100),n=parseFloat(g.dataset.value),u=parseInt(investment_timespan.value),l=(new Date).getFullYear(),m=parseInt(document.querySelector("#compound_frequency").value),f=parseInt(document.querySelector("#contribution_frequency").value),a=0,r=0,p=[],s=l;s<l+u;s++)p.push(s);for(var v={label:"Total Principal",backgroundColor:"rgb(0, 123, 255)",data:[]},y={label:"Total Interest",backgroundColor:"#1AAF5D",data:[]},o=1;o<=u;o++){var _,i,c=e+n*f*o,d=0,h=c;t&&(d=((_=e*(i=Math.pow(1+t/m,m*o)))+(i=n*(i-1)/(t/f))-c).toFixed(0),h=(_+i).toFixed(0)),future_balance.innerHTML="$"+q(h),v.data.push(c),y.data.push(d),a=c,r=d}return your_contributions.innerHTML="$"+q(a),your_compound_returns.innerHTML="$"+q(r),your_value.innerHTML="$"+q(parseFloat(a)+parseFloat(r)),{labels:p,datasets:[v,y]}}function i(){var e=t();s.data.labels=e.labels,s.data.datasets[0].data=e.datasets[0].data,s.data.datasets[1].data=e.datasets[1].data,s.update()}investment_timespan=document.querySelector("#investment_timespan"),investment_timespan_text=document.querySelector("#investment_timespan_text"),estimated_return=document.querySelector("#estimated_return"),future_balance=document.querySelector("#future_balance"),contribution_frquency=document.querySelector("#contribution_frequency"),compound_frquency=document.querySelector("#compound_frequency"),your_contributions=document.querySelector("#cinterest_result_contributions"),your_compound_returns=document.querySelector("#cinterest_result_compounded_return"),your_value=document.querySelector("#cinterest_result_value"),console.log("test22"),b.addEventListener("change",function(){n(this)}),b.addEventListener("change",function(){n(this)}),g.addEventListener("change",function(){n(this)}),estimated_return.addEventListener("change",function(){n(this)}),investment_timespan.addEventListener("change",function(){investment_timespan_text.innerHTML=this.value+" years",i()}),investment_timespan.addEventListener("input",function(){investment_timespan_text.innerHTML=this.value+" years"}),contribution_frquency.addEventListener("change",function(){i()}),compound_frquency.addEventListener("change",function(){i()});for(var e=document.querySelectorAll("[data-counter]"),a=0;a<e.length;a++)e[a].addEventListener("click",function(){var e=document.querySelector('[name="'+this.dataset.field+'"]'),t=this.dataset.counter;e&&n(e,t)});var r=document.getElementById("myChart").getContext("2d"),s=new Chart(r,{type:"line",data:t(),options:{legend:{display:!1},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": $"+e.yLabel}}},responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Year"}}],yAxes:[{stacked:!0,ticks:{callback:function(e){return"$"+e}},scaleLabel:{display:!0,labelString:"Balance"}}]}}})}();
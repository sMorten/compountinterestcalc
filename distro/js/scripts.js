function smcNumberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}class CInterestClass{constructor(e,t,a){this.settings={chart:{principle_colour:t,interest_colour:a}},this.mode="",this.fields={date:{clickListener:"#smc-date",fields:[".smc-date-control",".smc-date-result"]},fixed:{clickListener:"#smc-fixed",fields:[".smc-fixed-control",".smc-fixed-result"]}},this.chart_canvas="#myChart",this.cal_results={contributions:"",compounded_returns:"",fixed_investment_value:"",date_interval_amount:"",date_interval:"",date_goal:"",date_date:""},this.chart_data="",this.changeMode(e)}changeMode(e){"fixed"===e||"date"===e?(this.mode=e,this.setMode(e)):console.error("Interest system mode must be either 'fixed' or 'date'")}setMode(e){"fixed"===e||"date"===e?"fixed"===e?(document.querySelector(this.fields.fixed.clickListener).classList.add("smc-active"),document.querySelector(this.fields.date.clickListener).classList.remove("smc-active"),this.fields.fixed.fields.forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.classList.remove("smc-hidden")})}),this.fields.date.fields.forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.classList.add("smc-hidden")})})):"date"===e?(document.querySelector(this.fields.date.clickListener).classList.add("smc-active"),document.querySelector(this.fields.fixed.clickListener).classList.remove("smc-active"),this.fields.date.fields.forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.classList.remove("smc-hidden")})}),this.fields.fixed.fields.forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.classList.add("smc-hidden")})})):console.error("Interest System - Invalid Mode"):console.error("Interest system mode must be either 'fixed' or 'date'")}updateValue(e,t){console.log(e+" : "+t);var a=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max")),r=parseFloat(e.getAttribute("step"))||1,s=e.dataset.value||e.defaultValue||0,i=parseFloat(e.value.replace(/\$/,"")),i=isNaN(parseFloat(i))?s:("add"==t?i+=r:"sub"==t&&(i-=r),i<a?a:n<i?n:i);e.dataset.value=i,e.value=(e.dataset.prepend||"")+i+(e.dataset.append||""),this.updateChart()}buildChartData(){}calculateValues(){}buildChart(){try{buildChartData()}catch(e){console.error(e.message)}}updateChart(){}registerListeners(e){try{for(var a=this,t=(e.forEach(e=>{document.querySelector(e).addEventListener("change",function(){a.updateValue(this)})}),document.querySelectorAll("[data-counter]")),n=0;n<t.length;n++)t[n].addEventListener("click",function(){var e=document.querySelector('[name="'+this.dataset.field+'"]'),t=this.dataset.counter;e&&a.updateValue(e,t)})}catch(e){console.error(e)}}}!function(){var e=new CInterestClass("fixed","rgb(0, 123, 255)","#1AAF5D");console.log("Interest Manager Initiated");for(const t in e.fields)document.querySelector(e.fields[t].clickListener).addEventListener("click",()=>{e.changeMode(t)});e.registerListeners(["#initial_deposit","#contribution_amount","#investment_goal","#investment_timespan","#smc_target_date","#contribution_frequency","#compound_frequency"])}(),function(){var g=document.getElementById("initial_deposit"),b=document.querySelector("#contribution_amount");document.querySelector("#investment_goal");function a(e,t){console.log(e+" : "+t);var a=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max")),r=parseFloat(e.getAttribute("step"))||1,s=e.dataset.value||e.defaultValue||0,i=parseFloat(e.value.replace(/\$/,"")),i=isNaN(parseFloat(i))?s:("add"==t?i+=r:"sub"==t&&(i-=r),i<a?a:n<i?n:i);e.dataset.value=i,e.value=(e.dataset.prepend||"")+i+(e.dataset.append||""),o()}function L(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function t(){for(var e=parseFloat(g.dataset.value),t=parseFloat(estimated_return.dataset.value/100),a=parseFloat(b.dataset.value),l=parseInt(investment_timespan.value),u=(new Date).getFullYear(),m=parseInt(document.querySelector("#compound_frequency").value),f=parseInt(document.querySelector("#contribution_frequency").value),n=0,r=0,h=[],s=u;s<u+l;s++)h.push(s);for(var p={label:"Total Principal",backgroundColor:"rgb(0, 123, 255)",data:[]},v={label:"Total Interest",backgroundColor:"#1AAF5D",data:[]},i=1;i<=l;i++){var _,o,c=e+a*f*i,d=0,y=c;t&&(d=((_=e*(o=Math.pow(1+t/m,m*i)))+(o=a*(o-1)/(t/f))-c).toFixed(0),y=(_+o).toFixed(0)),future_balance.innerHTML="$"+L(y),p.data.push(c),v.data.push(d),n=c,r=d}return your_contributions.innerHTML="$"+L(n),your_compound_returns.innerHTML="$"+L(r),your_value.innerHTML="$"+L(parseFloat(n)+parseFloat(r)),{labels:h,datasets:[p,v]}}function o(){var e=t();s.data.labels=e.labels,s.data.datasets[0].data=e.datasets[0].data,s.data.datasets[1].data=e.datasets[1].data,s.update()}investment_timespan=document.querySelector("#investment_timespan"),investment_timespan_text=document.querySelector("#investment_timespan_text"),estimated_return=document.querySelector("#estimated_return"),future_balance=document.querySelector("#future_balance"),contribution_frquency=document.querySelector("#contribution_frequency"),compound_frquency=document.querySelector("#compound_frequency"),your_contributions=document.querySelector("#cinterest_result_contributions"),your_compound_returns=document.querySelector("#cinterest_result_compounded_return"),your_value=document.querySelector("#cinterest_result_value"),console.log("test22"),g.addEventListener("change",function(){console.log(this),a(this)}),g.addEventListener("change",function(){a(this)}),b.addEventListener("change",function(){a(this)}),estimated_return.addEventListener("change",function(){a(this)}),investment_timespan.addEventListener("change",function(){investment_timespan_text.innerHTML=this.value+" years",o()}),investment_timespan.addEventListener("input",function(){investment_timespan_text.innerHTML=this.value+" years"}),contribution_frquency.addEventListener("change",function(){o()}),compound_frquency.addEventListener("change",function(){o()});for(var e=document.querySelectorAll("[data-counter]"),n=0;n<e.length;n++)e[n].addEventListener("click",function(){var e=document.querySelector('[name="'+this.dataset.field+'"]'),t=this.dataset.counter;e&&a(e,t)});var r=document.getElementById("myChart").getContext("2d"),s=new Chart(r,{type:"line",data:t(),options:{legend:{display:!1},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": $"+e.yLabel}}},responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Year"}}],yAxes:[{stacked:!0,ticks:{callback:function(e){return"$"+e}},scaleLabel:{display:!0,labelString:"Balance"}}]}}})}();
class Cinterestclass{constructor(e){this.mode="",this.changeMode(e)}changeMode(e){"fixed"===e||"date"===e?this.mode=e:console.error("Interest system mode must be either 'fixed' or 'date'")}}!function(){var h=document.getElementById("initial_deposit"),g=document.querySelector("#contribution_amount");document.querySelector("#investment_goal");function n(e,t){var n=parseFloat(e.getAttribute("min")),a=parseFloat(e.getAttribute("max")),r=parseFloat(e.getAttribute("step"))||1,o=e.dataset.value||e.defaultValue||0,s=parseFloat(e.value.replace(/\$/,"")),s=isNaN(parseFloat(s))?o:("add"==t?s+=r:"sub"==t&&(s-=r),s<n?n:a<s?a:s);e.dataset.value=s,e.value=(e.dataset.prepend||"")+s+(e.dataset.append||""),u()}function q(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function t(){for(var e=parseFloat(h.dataset.value),t=parseFloat(estimated_return.dataset.value/100),n=parseFloat(g.dataset.value),d=parseInt(investment_timespan.value),l=(new Date).getFullYear(),m=parseInt(document.querySelector("#compound_frequency").value),p=parseInt(document.querySelector("#contribution_frequency").value),a=0,r=0,_=[],o=l;o<l+d;o++)_.push(o);for(var v={label:"Total Principal",backgroundColor:"rgb(0, 123, 255)",data:[]},y={label:"Total Interest",backgroundColor:"#1AAF5D",data:[]},s=1;s<=d;s++){var f,u,i=e+n*p*s,c=0,b=i;t&&(c=((f=e*(u=Math.pow(1+t/m,m*s)))+(u=n*(u-1)/(t/p))-i).toFixed(0),b=(f+u).toFixed(0)),future_balance.innerHTML="$"+q(b),v.data.push(i),y.data.push(c),a=i,r=c}return your_contributions.innerHTML="$"+q(a),your_compound_returns.innerHTML="$"+q(r),your_value.innerHTML="$"+q(parseFloat(a)+parseFloat(r)),{labels:_,datasets:[v,y]}}function u(){var e=t();o.data.labels=e.labels,o.data.datasets[0].data=e.datasets[0].data,o.data.datasets[1].data=e.datasets[1].data,o.update()}investment_timespan=document.querySelector("#investment_timespan"),investment_timespan_text=document.querySelector("#investment_timespan_text"),estimated_return=document.querySelector("#estimated_return"),future_balance=document.querySelector("#future_balance"),contribution_frquency=document.querySelector("#contribution_frequency"),compound_frquency=document.querySelector("#compound_frequency"),your_contributions=document.querySelector("#cinterest_result_contributions"),your_compound_returns=document.querySelector("#cinterest_result_compounded_return"),your_value=document.querySelector("#cinterest_result_value"),console.log("test22"),h.addEventListener("change",function(){n(this)}),h.addEventListener("change",function(){n(this)}),g.addEventListener("change",function(){n(this)}),estimated_return.addEventListener("change",function(){n(this)}),investment_timespan.addEventListener("change",function(){investment_timespan_text.innerHTML=this.value+" years",u()}),investment_timespan.addEventListener("input",function(){investment_timespan_text.innerHTML=this.value+" years"}),contribution_frquency.addEventListener("change",function(){u()}),compound_frquency.addEventListener("change",function(){u()});for(var e=document.querySelectorAll("[data-counter]"),a=0;a<e.length;a++)e[a].addEventListener("click",function(){var e=document.querySelector('[name="'+this.dataset.field+'"]'),t=this.dataset.counter;e&&n(e,t)});var r=document.getElementById("myChart").getContext("2d"),o=new Chart(r,{type:"line",data:t(),options:{legend:{display:!1},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": $"+e.yLabel}}},responsive:!0,scales:{xAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"Year"}}],yAxes:[{stacked:!0,ticks:{callback:function(e){return"$"+e}},scaleLabel:{display:!0,labelString:"Balance"}}]}}})}();